<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rob√¥ Aviator - Analisador</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background:#0d1117; color:#e6edf3; margin:0; padding:20px; }
    h1 { text-align:center; }
    textarea { width:100%; height:100px; margin:10px 0; padding:10px; border-radius:8px; border:1px solid #30363d; background:#161b22; color:#fff; }
    button { padding:10px 20px; border:0; border-radius:8px; background:#238636; color:#fff; cursor:pointer; font-weight:bold; }
    .result { margin-top:20px; padding:15px; background:#161b22; border-radius:8px; transition: all 0.5s ease; }
    .highlight { font-size:20px; font-weight:bold; color:#2ea043; }
    .alerta { border:2px solid #ff0000; background:#400; }
    canvas { margin-top:20px; background:#fff; border-radius:8px; }
    h2 { margin-top:30px; }
    .hist { margin-top:10px; display:grid; gap:10px; }
    .item { background:#161b22; padding:10px; border-radius:8px; border:1px solid #30363d; }
    .badge { padding:3px 8px; border-radius:999px; font-size:12px; }
    .verde { background:#2ea043; color:#000; }
    .vermelho { background:#da3633; color:#fff; }
  </style>
</head>
<body>
  <h1>üìä Rob√¥ Aviator</h1>
  <p>Cole abaixo os √∫ltimos resultados (separados por v√≠rgula):</p>
  <textarea id="input" placeholder="Ex.: 1.10, 1.50, 2.30, 10.00, 1.20"></textarea>
  <button onclick="analisar()">Analisar</button>

  <div class="result" id="output"></div>
  <canvas id="chart" height="120"></canvas>

  <!-- Hist√≥rico -->
  <h2>üìú Hist√≥rico de An√°lises</h2>
  <div class="hist" id="hist"></div>

  <!-- Som de alerta -->
  <audio id="beep">
    <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg">
  </audio>

  <script>
    let historico = [];

    function analisar(){
      const input = document.getElementById("input").value;
      if(!input.trim()){ alert("Cole os resultados!"); return; }

      const valores = input.split(",").map(v => parseFloat(v.trim())).filter(v => !isNaN(v));

      let baixos = valores.filter(v => v <= 2).length;
      let medios = valores.filter(v => v > 2 && v <= 10).length;
      let altos = valores.filter(v => v > 10).length;

      // c√°lculo simples de probabilidade
      let probMedia = (baixos >= 3) ? Math.min(85, 40 + baixos*5) : 30;
      let probAlta = (medios >= 3) ? Math.min(65, 20 + medios*4) : 15;

      // resultado base
      const resumo = {
        total: valores.length,
        baixos, medios, altos,
        probMedia, probAlta,
        alerta: baixos >= 5
      };

      // Mostrar na tela principal
      const outBox = document.getElementById("output");
      outBox.innerHTML = `
        Total de rodadas: <b>${resumo.total}</b><br>
        Rodadas Baixas (‚â§2x): <b>${resumo.baixos}</b><br>
        Rodadas M√©dias (2‚Äì10x): <b>${resumo.medios}</b><br>
        Rodadas Altas (>10x): <b>${resumo.altos}</b><br><br>
        üîÆ <span class="highlight">Chance estimada pr√≥xima rodada:</span><br>
        M√©dia (2‚Äì10x): <b>${resumo.probMedia}%</b><br>
        Alta (>10x): <b>${resumo.probAlta}%</b>
      `;

      // alerta
      if(resumo.alerta){
        outBox.classList.add("alerta");
        document.getElementById("beep").play();
      } else {
        outBox.classList.remove("alerta");
      }

      // gr√°fico
      const ctx = document.getElementById("chart").getContext("2d");
      if(window.grafico){ window.grafico.destroy(); }
      window.grafico = new Chart(ctx, {
        type: "line",
        data: {
          labels: valores.map((_,i)=>i+1),
          datasets: [{
            label: "Hist√≥rico de Rodadas",
            data: valores,
            borderColor: "#2ea043",
            backgroundColor: "rgba(46,160,67,0.2)",
            tension: 0.3,
            fill:true
          }]
        },
        options: {
          responsive:true,
          plugins:{ legend:{labels:{color:"#000"}} },
          scales:{ x:{ticks:{color:"#000"}}, y:{ticks:{color:"#000"}} }
        }
      });

      // salvar no hist√≥rico
      historico.unshift(resumo);
      renderHistorico();
    }

    function renderHistorico(){
      const histBox = document.getElementById("hist");
      histBox.innerHTML = historico.map((h,i) => `
        <div class="item">
          <b>An√°lise #${historico.length - i}</b><br>
          Baixas: ${h.baixos} ‚Ä¢ M√©dias: ${h.medios} ‚Ä¢ Altas: ${h.altos}<br>
          Pr√≥xima rodada ‚Üí M√©dia: 
            <span class="badge verde">${h.probMedia}%</span> 
          Alta: 
            <span class="badge ${h.alerta ? 'vermelho' : 'verde'}">${h.probAlta}%</span>
          ${h.alerta ? "<br>‚ö†Ô∏è <b>ALERTA: muitas rodadas baixas!</b>" : ""}
        </div>
      `).join("");
    }
  </script>
</body>
</html>