<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Terapêutico | Potira Barros</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --verde:#4f7f6a;
  --verde2:#cfe3d8;
  --areia:#f6f4ef;
  --branco:#fff;
  --cinza:#ddd;
  --escuro:#2f5d4a;
}
*{box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{margin:0;background:var(--areia);color:#333}

/* SPLASH */
#splash{
  position:fixed;inset:0;
  background:linear-gradient(135deg,#6fa58f,#2f5d4a);
  display:flex;align-items:center;justify-content:center;
  color:#fff;z-index:9999;
  animation:fadeOut 1s forwards;animation-delay:3s
}
@keyframes fadeOut{to{opacity:0;visibility:hidden}}

/* NAV */
nav{
  display:flex;gap:8px;
  background:#fff;padding:12px;
  box-shadow:0 2px 12px rgba(0,0,0,.12)
}
nav button{
  flex:1;padding:12px;border:none;
  background:var(--verde2);
  border-radius:10px;
  cursor:pointer;font-weight:600
}
nav button.active{background:var(--verde);color:#fff}

/* SECTIONS */
section{display:none;padding:22px}
section.active{display:block}

/* CARDS */
.card{
  background:#fff;padding:22px;
  border-radius:14px;margin-bottom:22px;
  box-shadow:0 6px 18px rgba(0,0,0,.08)
}

input,select,textarea,button{
  width:100%;padding:12px;margin-bottom:10px;
  border-radius:8px;border:1px solid var(--cinza)
}
button{background:var(--verde);color:#fff;border:none;cursor:pointer}

.list-item{
  background:#f9f9f9;padding:14px;
  border-radius:10px;margin-bottom:10px;
  border-left:6px solid var(--verde)
}

.calendario{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}
.dia{
  background:#fff;
  border-radius:10px;
  padding:12px;
  text-align:center;
  cursor:pointer;
  box-shadow:0 2px 6px rgba(0,0,0,.1)
}
.dia.indisponivel{opacity:.3;pointer-events:none}
.dia.selecionado{background:var(--verde);color:#fff}

.footer{
  text-align:center;font-size:12px;
  opacity:.5;padding:12px;
  cursor:pointer
}
</style>
</head>

<body>

<!-- SPLASH -->
<div id="splash">
  <div style="text-align:center">
    <h1>Potira Barros</h1>
    <p>Terapeuta Integrativa</p>
    <p>Cuidado • Equilíbrio • Consciência</p>
  </div>
</div>

<!-- NAV -->
<nav>
  <button class="active" onclick="show('agendaCliente')">Agenda</button>
  <button onclick="show('cliente')">Área do Cliente</button>
  <button id="btnAgendaProf" onclick="show('agendaProf')">Agenda Profissional</button>
  <button id="btnPacientes" onclick="show('pacientes')">Pacientes</button>
  <button id="btnFinanceiro" onclick="show('financeiro')">Financeiro</button>
</nav>

<!-- AGENDA CLIENTE -->
<section id="agendaCliente" class="active">
  <div class="card">
    <h2>Escolha uma data</h2>
    <div class="calendario" id="calendario"></div>
  </div>

  <div class="card">
    <h2>Agendar Sessão</h2>
    <input id="cNome" placeholder="Seu nome">
    <input id="cTelefone" placeholder="Seu telefone">
    <input type="time" id="cHora">
    <button onclick="agendar()">Confirmar Agendamento</button>
  </div>
</section>

<!-- ÁREA DO CLIENTE -->
<section id="cliente">
  <div class="card">
    <h2>Meu Histórico</h2>
    <div id="historicoCliente"></div>
  </div>
</section>

<!-- AGENDA PROFISSIONAL -->
<section id="agendaProf">
  <div class="card">
    <h2>Agenda Completa</h2>
    <div id="listaAgenda"></div>
  </div>
</section>

<!-- PACIENTES -->
<section id="pacientes">
  <div class="card">
    <h2>Pacientes</h2>
    <div id="listaPacientes"></div>
  </div>
</section>

<!-- FINANCEIRO -->
<section id="financeiro">
  <div class="card">
    <h2>Financeiro</h2>
    <p>Total de sessões: <span id="fQtd">0</span></p>
    <p>Total faturado: R$ <span id="fTotal">0</span></p>
  </div>
</section>

<div class="footer" onclick="acessoTerapeuta()">Acesso Profissional</div>

<script>
/* CONFIG */
const SENHA_TERAPEUTA = "potira123";
let modo = localStorage.getItem("modo") || "cliente";

/* DADOS */
let agenda = JSON.parse(localStorage.getItem("agenda")) || [];
let diaSelecionado = null;

/* CONTROLE DE ACESSO */
function controlarAcesso(){
  if(modo==="cliente"){
    btnAgendaProf.style.display="none";
    btnPacientes.style.display="none";
    btnFinanceiro.style.display="none";
  }
}
controlarAcesso();

/* LOGIN TERAPEUTA */
function acessoTerapeuta(){
  const s = prompt("Acesso restrito ao profissional");
  if(s===SENHA_TERAPEUTA){
    localStorage.setItem("modo","terapeuta");
    location.reload();
  }else alert("Senha incorreta");
}

/* NAVEGAÇÃO */
function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
}

/* CALENDÁRIO */
function gerarCalendario(){
  calendario.innerHTML="";
  for(let i=1;i<=30;i++){
    const d=document.createElement("div");
    d.className="dia";
    d.innerText=i;
    d.onclick=()=>selecionarDia(i);
    calendario.appendChild(d);
  }
}
function selecionarDia(dia){
  document.querySelectorAll(".dia").forEach(el=>el.classList.remove("selecionado"));
  event.target.classList.add("selecionado");
  diaSelecionado=dia;
}

/* AGENDAR */
function agendar(){
  if(!diaSelecionado||!cNome.value||!cHora.value){
    alert("Preencha tudo");
    return;
  }
  agenda.push({
    dia:diaSelecionado,
    nome:cNome.value,
    telefone:cTelefone.value,
    hora:cHora.value,
    valor:150
  });
  localStorage.setItem("agenda",JSON.stringify(agenda));
  alert("Agendamento realizado!");
  render();
}

/* RENDER */
function render(){
  listaAgenda.innerHTML="";
  listaPacientes.innerHTML="";
  historicoCliente.innerHTML="";
  let total=0;

  agenda.forEach(a=>{
    listaAgenda.innerHTML+=`
      <div class="list-item">
        Dia ${a.dia} • ${a.hora}<br>
        ${a.nome} (${a.telefone})
      </div>
    `;
    listaPacientes.innerHTML+=`<div class="list-item">${a.nome}</div>`;
    total+=a.valor;
  });

  fQtd.innerText=agenda.length;
  fTotal.innerText=total.toFixed(2);

  agenda
    .filter(a=>a.nome===cNome.value)
    .forEach(a=>{
      historicoCliente.innerHTML+=`
        <div class="list-item">
          Dia ${a.dia} • ${a.hora}
        </div>
      `;
    });
}

gerarCalendario();
render();
</script>

</body>
</html>